<%-include('../partials/header.ejs')%>
<h1>Edit Photo</h1>
<h3><%=message%></h3>

<form method='POST' action="/photos/<%=photo._id%>?_method=PUT">
  <div class="form-group">
    <label for="title">Title</label>
    <input type="text" class="form-control col-3" id="title" name="title" aria-describedby="emailHelp" value="<%=photo.title%>">
  </div>
  <div class="form-group url">
    <label for="url">Image Url</label>
    <input type="text" class="form-control col-3" id="url" name="url" value="<%=photo.url%>">
  </div>
   <div class="form-group">
    <label for="desc">Description</label>
    <input type="text" class="form-control col-3" id="desc" name="desc" value="<%=photo.desc%>">
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>


<script type="text/javascript">
  $('form').submit( () => {
  
  const url = $('#url').val()
  
  if (!url){
    event.preventDefault()
    const requiredText = $('<small>Url is Required!</small>').css({'color': 'red'})
    $('.url').append(requiredText)
  }
  else if (!url.includes('http')){

    event.preventDefault()
    const requiredText = $('<small>Proper Url format is required!</small>').css({'color': 'red'})
    $('.url').append(requiredText)
  }

})  

</script>

<%-include('../partials/footer.ejs')%>